class Assignment{
  String paymentCode = null;

  sm{
    Assigned{
      s1{
        NotStarted{
          start [!isPaid()] -> /{getMember().ban();} Cancelled;
          start [isPaid()] -> Started;
          cancel -> Cancelled;
        }
        Started{
          finish -> Finished;
          cancel -> Cancelled;
        }
        Finished{}
        Cancelled{}
      }
      ||
      s2{
        NotPaid{
          pay -> Paid;
        }
        Paid{}
      }
     }
  }
  
  private boolean isPaid() {
    if( this.getSmAssignedS2S2() == SmAssignedS2S2.Paid ) return true;
    return false;
  }
}

class Guide{
  Integer bookings = 0;
  }

class Member{
  Integer refund = 0;
  sm{
    Active{ban -> Banned;}
    Banned{}
  }
}